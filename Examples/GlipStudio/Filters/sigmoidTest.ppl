REQUIRED_FORMAT:mainFmt(FormatIn_0)

INCLUDE_FILE(histogram.ppl)

SHADER_SOURCE:sigmoidShader
{
	#version 130

	uniform sampler2D inputTexture;
	out vec4 outputTexture;

	uniform float center = 0.5f, scale = 1.0f;

	voi d main()
	{
		vec2 pos 	= gl_TexCoord[0].st;
		vec4 col	= textureLod(inputTexture,  pos, 0);

		outputTexture	= 1.0f / (1.0f + exp(-(col-center)/scale));
	}
}

FILTER_LAYOUT:sigmoidFilter(mainFmt, sigmoidShader)

PIPELINE_MAIN:sigmoidPipeline
{
	INPUT_PORTS(inputTexture)
	OUTPUT_PORTS(outputTexture, histogramBins, histogramShow)

	FILTER_INSTANCE:sigmoid(sigmoidFilter)
	PIPELINE_INSTANCE:histogram(pipelineHistogram)

	CONNECTION(THIS, inputTexture, sigmoid, *)
	CONNECTION(sigmoid, *, THIS, outputTexture)

	CONNECTION(sigmoid, *, histogram, *)
	CONNECTION(histogram, histogramBins, THIS, histogramBins)
	CONNECTION(histogram, outputTexture, THIS, histogramShow)
}
